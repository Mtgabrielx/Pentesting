import requests
import sys
import threading

argumentos = sys.argv
url = argumentos[1]
caminho_wordlist = argumentos[2] 

class Socket_():
    def __init__(self,url,caminho_wordlist,multi_thread=2):
        self.url = url
        self.list_ = []

    def scan(self,url,caminho_wordlist,multi_thread=2):
        cont = 0
        threads_list = []
        with open (caminho_wordlist,"r") as arquivo:
            linha = arquivo.readline().strip()
            while True:
                # http://bancocn.com texto.txt
                if not linha:
                    if threads_list:
                        for i in threads_list: i.join() 
                    break
                else:
                    if cont < multi_thread:
                        thread = threading.Thread(target=self.enviar_requisição, args=(linha,))
                        thread.start()
                        threads_list.append(thread)
                        linha = arquivo.readline().strip()
                        cont += 1
                    else:
                        for i in threads_list: i.join() 
                        cont = 0
                        threads_list = []
        print(self.list_)

    def enviar_requisição(self,linha):
        temp = self.url+"/"+linha
        resposta = requests.get(temp)
        if resposta.status_code == 200:
            temp = temp.strip() + " ==> 200"
            self.list_.append(temp)

sok = Socket_(url,caminho_wordlist)
sok.scan(url,caminho_wordlist)