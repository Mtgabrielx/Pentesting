import socket 
import cifra_caesar
import threading

class Server():
    def __init__(self):
        self.socket_server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket_server.bind(("localhost",4444))
        self.socket_server.listen(5)

    def listen_conection(self):
        while True:
            client_sock, client_addr = self.socket_server.accept()
            while client_sock:
                recv = client_sock.recv(2048)
                mensagem = cifra_caesar.Caesar_decode(recv.decode('utf-8'))
                print("mensagem do cliente: "+mensagem)
                mensagem_enviar = (input("Sua mensagem: "))
                mensagem_enviar = cifra_caesar.Caesar_encode(mensagem_enviar)
                client_sock.send(mensagem_enviar.encode('utf-8'))
        sock_client.close()


server = Server()
server.listen_conection()


